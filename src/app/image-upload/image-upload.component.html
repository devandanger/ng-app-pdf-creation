<div class="image-upload-container">
  <!-- Upload Area -->
  @if (!previewUrl) {
    <div 
      class="upload-area"
      [class.drag-over]="isDragOver"
      [class.loading]="isLoading"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)">
      
      @if (isLoading) {
        <div class="loading-spinner">
          <div class="spinner"></div>
          <p>Processing image...</p>
        </div>
      } @else {
        <div class="upload-content">
          <div class="upload-icon">üì∑</div>
          <h4>Upload Image</h4>
          <p>Drag and drop an image here, or click to select</p>
          <button type="button" class="upload-btn" onclick="document.getElementById('file-input').click()">
            Choose File
          </button>
          <input 
            id="file-input"
            type="file" 
            [accept]="acceptedTypes"
            (change)="onFileSelect($event)"
            style="display: none">
          <div class="upload-info">
            <small>Accepted formats: JPG, PNG, GIF, WebP</small>
            <small>Maximum size: {{ maxSizeInMB }}MB</small>
          </div>
        </div>
      }
    </div>
  }

  <!-- Preview Area -->
  @if (previewUrl && showPreview) {
    <div class="preview-area">
      <div class="preview-header">
        <h4>Image Preview</h4>
        <button type="button" class="remove-btn" (click)="removeImage()" title="Remove image">
          √ó
        </button>
      </div>
      <div class="preview-content">
        <img [src]="previewUrl" alt="Preview" class="preview-image">
      </div>
      <div class="preview-actions">
        <button type="button" class="change-btn" onclick="document.getElementById('file-input-change').click()">
          Change Image
        </button>
        <input 
          id="file-input-change"
          type="file" 
          [accept]="acceptedTypes"
          (change)="onFileSelect($event)"
          style="display: none">
      </div>
    </div>
  }

  <!-- Error Message -->
  @if (errorMessage) {
    <div class="error-message">
      <span class="error-icon">‚ö†Ô∏è</span>
      {{ errorMessage }}
    </div>
  }
</div>
